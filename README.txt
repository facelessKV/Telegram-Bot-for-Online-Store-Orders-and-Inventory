# ИНСТРУКЦИЯ ПО УСТАНОВКЕ И ЗАПУСКУ TELEGRAM-БОТА

## СОДЕРЖАНИЕ
1. Установка на Windows
2. Установка на Linux
3. Настройка бота
4. Запуск бота
5. Команды бота
6. Решение проблем

---

## 1. УСТАНОВКА НА WINDOWS

### 1.1. Установка Python 3.9
1. Скачайте Python 3.9.13 с официального сайта:
   https://www.python.org/downloads/release/python-3913/
   
   Выберите "Windows installer (64-bit)" или "Windows installer (32-bit)" в зависимости от вашей системы.

2. Запустите скачанный файл установки.

3. **ВАЖНО**: Поставьте галочку "Add Python 3.9 to PATH" перед нажатием на "Install Now".

4. Нажмите "Install Now" и дождитесь завершения установки.

### 1.2. Создание папки для проекта
1. Создайте новую папку для бота, например, на рабочем столе.
   Назовите её "TelegramShopBot" или любым другим удобным названием.

2. Скопируйте файл скрипта бота (например, `bot.py`) в эту папку.

### 1.3. Открытие командной строки
1. Нажмите Win+R, введите "cmd" и нажмите Enter.

2. В командной строке перейдите в созданную папку с ботом.
   Например:
   ```
   cd C:\Users\ИМЯ_ПОЛЬЗОВАТЕЛЯ\Desktop\TelegramShopBot
   ```

### 1.4. Создание виртуального окружения и установка библиотек
1. Выполните следующие команды по порядку:

   ```
   python -m venv venv
   venv\Scripts\activate
   pip install aiogram>=3.0.0
   ```

   После выполнения последней команды дождитесь завершения установки библиотеки.

---

## 2. УСТАНОВКА НА LINUX

### 2.1. Установка Python 3.9
1. Откройте терминал с помощью Ctrl+Alt+T.

2. Выполните следующие команды для установки Python 3.9:

   Для Ubuntu/Debian:
   ```
   sudo apt update
   sudo apt install software-properties-common
   sudo add-apt-repository ppa:deadsnakes/ppa
   sudo apt update
   sudo apt install python3.9 python3.9-venv python3.9-dev
   ```

   Для CentOS/RHEL:
   ```
   sudo yum install -y python39 python39-devel
   ```

### 2.2. Создание папки для проекта
1. Создайте новую папку для бота:
   ```
   mkdir ~/TelegramShopBot
   cd ~/TelegramShopBot
   ```

2. Скопируйте файл скрипта бота (например, `bot.py`) в эту папку.

### 2.3. Создание виртуального окружения и установка библиотек
1. Находясь в папке проекта, выполните следующие команды:

   ```
   python3.9 -m venv venv
   source venv/bin/activate
   pip install aiogram>=3.0.0
   ```

   После выполнения последней команды дождитесь завершения установки библиотеки.

---

## 3. НАСТРОЙКА БОТА

### 3.1. Получение токена бота
1. Откройте Telegram и найдите бота @BotFather.

2. Напишите ему команду /newbot и следуйте инструкциям:
   - Укажите имя бота (например, "My Shop Bot")
   - Укажите уникальное имя пользователя, которое должно заканчиваться на "bot" (например, "my_shop_2024_bot")

3. После создания бота вы получите токен, который выглядит примерно так:
   ```
   1234567890:AAHEXaFjvmGwYAyBQIazEPpO2V0g5uRRRRR
   ```

4. Скопируйте этот токен и сохраните его.

### 3.2. Получение ID администратора
1. Откройте Telegram и найдите бота @userinfobot.

2. Напишите ему любое сообщение, и он пришлет вам ваш ID (число).

3. Запомните или скопируйте этот ID.

### 3.3. Изменение настроек в файле бота
1. Откройте файл с кодом бота (например, `bot.py`) в любом текстовом редакторе:
   - На Windows вы можете использовать Блокнот (щелкните правой кнопкой мыши на файле → Открыть с помощью → Блокнот)
   - На Linux можете использовать редактор nano: `nano bot.py`

2. Найдите следующие строки в начале файла:
   ```python
   API_TOKEN = 'YOUR_BOT_TOKEN'
   ADMIN_ID = 123456789
   ```

3. Замените 'YOUR_BOT_TOKEN' на скопированный токен бота (в кавычках).

4. Замените 123456789 на ваш ID, полученный от @userinfobot (без кавычек).

5. Сохраните файл.

---

## 4. ЗАПУСК БОТА

### 4.1. Запуск на Windows
1. Если командная строка закрыта, откройте её снова и перейдите в папку с ботом:
   ```
   cd C:\Users\ИМЯ_ПОЛЬЗОВАТЕЛЯ\Desktop\TelegramShopBot
   ```

2. Активируйте виртуальное окружение, если оно еще не активировано:
   ```
   venv\Scripts\activate
   ```

3. Запустите бота командой:
   ```
   python bot.py
   ```

4. Бот должен успешно запуститься. Вы увидите сообщение "Запуск бота..." в командной строке.

5. Чтобы остановить бота, нажмите Ctrl+C в командной строке.

### 4.2. Запуск на Linux
1. Если терминал закрыт, откройте его снова и перейдите в папку с ботом:
   ```
   cd ~/TelegramShopBot
   ```

2. Активируйте виртуальное окружение, если оно еще не активировано:
   ```
   source venv/bin/activate
   ```

3. Запустите бота командой:
   ```
   python bot.py
   ```

4. Бот должен успешно запуститься. Вы увидите сообщение "Запуск бота..." в терминале.

5. Чтобы остановить бота, нажмите Ctrl+C в терминале.

### 4.3. Запуск бота в фоновом режиме (только Linux)
Чтобы бот работал после закрытия терминала:

1. Находясь в папке с ботом, выполните:
   ```
   nohup python bot.py > bot_log.txt 2>&1 &
   ```

2. Чтобы позже остановить бота, найдите его ID:
   ```
   ps aux | grep python
   ```

3. Найдите строку с "bot.py" и запомните число в начале строки (PID).

4. Остановите бота командой:
   ```
   kill PID
   ```
   Где PID - запомненное число.

---

## 5. КОМАНДЫ БОТА

### 5.1. Команды для всех пользователей
- `/start` - Начать работу с ботом
- `/catalog` - Показать каталог товаров
- `/order` - Создать новый заказ
- `/status` - Проверить статус заказа

### 5.2. Команды для администратора
- `/stock` - Управление запасами товаров
- `/orders` - Просмотр и управление заказами

---

## 6. РЕШЕНИЕ ПРОБЛЕМ

### 6.1. Не устанавливается библиотека aiogram
- Убедитесь, что вы активировали виртуальное окружение
- Попробуйте обновить pip командой:
  ```
  pip install --upgrade pip
  ```
- Затем повторите установку aiogram:
  ```
  pip install aiogram>=3.0.0
  ```

### 6.2. Бот не запускается
- Проверьте, правильно ли указан токен бота
- Убедитесь, что вы находитесь в папке с файлом бота
- Убедитесь, что вы активировали виртуальное окружение

### 6.3. Ошибка "ModuleNotFoundError: No module named 'aiogram'"
- Убедитесь, что вы активировали виртуальное окружение перед запуском бота
- Если ошибка сохраняется, повторите установку aiogram:
  ```
  pip install aiogram>=3.0.0
  ```

### 6.4. Другие ошибки
Если вы столкнулись с другими ошибками, попробуйте:
1. Перезапустить компьютер
2. Создать новое виртуальное окружение и установить библиотеки заново
3. Искать текст ошибки в Google для получения дополнительной информации

---

## ДОПОЛНИТЕЛЬНАЯ ИНФОРМАЦИЯ
- База данных и все данные о товарах и заказах хранятся в файле `shop.db`, который создается автоматически в папке с ботом.
- При первом запуске бота создается тестовый каталог товаров.
- Все логи бота записываются в консоль.

---

Если у вас остались вопросы, обратитесь к разработчику или в службу поддержки.